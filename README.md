# restaurant-poc-grpc

[RETO.pdf](https://drive.google.com/file/d/16KTCTezW9Sf_TVnRWSmktSMq_fjfWFEF/view?usp=sharing)

[ARQUITECTURA.pdf](https://drive.google.com/file/d/1gszkVqEQFDJQysX7pYBe77c66bXRfvii/view?usp=sharing)

## Historias de usuario

| # HU | Rol | Historia de Usuario | Descripcion | Criterios de aceptacion |
| --- | --- | --- | --- | --- |
| 1 | Administrador | Crear Propietario | Yo como Usuario de la plataforma de plazoleta de comidas necesito poder crear en el sistema mi cuenta segun el rol para poder interactuar en el sistema segun mis permisos | 1. Al crear una cuenta, se deben solicitar los siguientes campos obligatorios: Nombre, Apellido, DocumentoDeIdentidad, celular, correo y clave(encriptada con bcrypt) 2. Se debe verificar estructura de email válida, el teléfono debe contener un máximo de 13 caracteres y puede contener el símbolo +. Ejemplo: +573005698325, El documento de identidad debe ser únicamente numérico. 3. el usuario quedara con el rol propietario. |
| Administrador | Crear Restaurante | Yo como administrador de la plazoleta de comidas necesito poder crear en el sistema los restaurantes para brindarle al cliente la posibilidad de escoger en cual pedir sus alimentos. | 1. La creación de un restaurante requiere los siguientes campos obligatorios: Nombre, NIT, Direccion, Telefono, UrlLogo y el id del usuario propitario. 2. Al momento de la creación del restaurante, se debe validar que el el id del usuario corresponda a un usuario con ese rol. 3. Los campos NIT y TelefonoRestaurante deben ser únicamente numéricos. El campo TelefonoRestaurante debe contener un máximo de 13 caracteres y puede contener el símbolo +. Ejemplo: +573005698325. 4. El nombre del restaurante puede contener números, pero no se permiten nombres con sólo números. |  |
| Propietario | Crear Plato. | Yo como propietario de un restaurante necesito crear platos para asociarlos al menú de mi restaurante para brindarle diferentes opciones de platos al cliente | 1. Solo el propietario de un restaurante puede crear platos. 2. Para crear un plato se deben solicitar los siguientes campos obligatorios: Nombre del plato, precio del plato (en números enteros positivos y mayores a 0), Descripción, UrlImagen y la categoria. 3. Todo plato debe estar asociado a un restaurante. 4. por defecto cada plato recien creado tiene la variable activa en true. |  |
| Propietario | Modificar Plato. | Yo como propietario de un restaurante necesito actualizar la información de los platos en el menú  para corregir valores errados o actualizar precios | 1. Solo se puede modificar precio y descripcion. |  |
| 5 | Administrador / Propietario / Empleado | Agregar Autenticacion al sistema | Yo como administrador / cliente / propietario / empleado necesito agregar la autenticacion al sistema para poder acceder a las funcionalidades que le corresponden a mi rol y exponer mis servicios solo a usuarios logiados | 1. El inicio de sesión es a través de correo y clave. 2. Se debe validar usuario y contraseña correcta. 3. El número de intentos puede ser ilimitado. 4. Una vez iniciada la sesión, se debe garantizar que con esa sesión iniciada, cada usuario tiene los permisos para realizar las acciones que le correspondan a su rol. 5. Agregar validacion de autenticacion a los siguientes endpoint:     -si creo un usuario propietario, validar que la persona que llamo el servicio sera usuario administrador.     -si creo un usuario empleado, validar que la persona que llamo el servicio sea usuario propietario.     -si creo un restaurante, validar que la persona que llamo el servicio sea un usuario administrador.     -si creo/modifico un plato, validar que la persona que llamo el servicio sea un usuario propietario y sea el propietario del restaurante al cual se le va a asignar ese plato. Nota: En esta versión de la aplicación, no está contemplada la recuperación de contraseña. |
| Propietario | Crear cuenta empleado | Yo como propietario de un restaurante  necesito poder crearles cuentas a los empleados para que puedan acceder al sistema y administrar los pedidos | 1. Solo el propietario puede crearle cuentas a los empleados de su empresa 2. Al crear una cuenta para empleado, se deben solicitar los siguientes campos obligatorios: Nombre, Apellido, DocumentoDeIdentidad, celular, correo, idRol y clave(encriptada con bcrypt). 3. El usuario quedara con el rol empleado. |  |
| Propietario | Habilitar/Deshabilitar Plato | Yo como propietario de un restaurante necesito activar/desactivar platos en el menú  para dejar de ofrecer el producto en el menú | 1. Solo el propietario puede habilitar/deshabilitar platos. 2. No se permiten modificar platos de otros restaurantes diferentes al propio. |  |
| Cliente | Crear cuenta Cliente | Yo como cliente de la plazoleta de comida  necesito poder crear mi cuenta  para que puedan acceder al sistema y Realizar pedidos | 1. Al crear una cuenta para Cliente, se deben solicitar los siguientes campos obligatorios: Nombre, Apellido, DocumentoDeIdentidad, celular, correo, idRol y clave(encriptada con bcrypt). 3. El usuario quedara con el rol cliente." |  |
| 9 | Cliente | Listar los restaurantes | Yo como cliente de la plazoleta de comidas necesito listar los restaurantes disponibles para poder elegir en cual deseo ordenar un plato | 1. Se deben listar todos los restaurantes por orden alfabético y paginados de acuerdo con un campo que permita especificar cuántos elementos por página. 2. Los campos devueltos de cada restaurante deben ser: Nombre, UrlLogo |
| Cliente | Listar los platos de un restaurante | Yo como cliente de la plazoleta de comidas necesito listar el menú de cada restaurante al que le doy clic para poder solicitar el plato de mi preferencia | 1. Se deben listar paginados y agrupados por categoría los platos de cada menú. 3. Se debe poder paginar de acuerdo con el número de elementos por página escogido. |  |
| Cliente | Realizar pedido | Yo como cliente de la plazoleta de comidas necesito poder solicitar los platos de mi preferencia para que puedan prepararlos y traerlos a mi mesa | 1. Un pedido consta de una lista de platos de un mismo restaurante. 2, Todo pedido debe especificar el restaurante, los platos escogidos y la cantidad de cada uno de esos platos. 3. Inmediatamente después de recibir un pedido, este debe quedar con estado "Pendiente". 4. El cliente puede solicitar un nuevo pedido, solo si no tiene ningun pedido en proceso(en_preparacion,pendiente o listo) |  |
| Empleado | Obtener lista de pedidos filtrando por estado | Yo como empleado de un restaurante necesito visualizar la lista de pedidos filtrando por estado para poder seleccionar aquel pedido al que necesite cambiarle su estado | 1. El servicio debe devolver la lista de pedidos de acuerdo con un filtro por estado. 2. El servicio debe estar paginado y se le debe especificar la cantidad de elementos por página. 3. Se deben listar todos los campos del pedido.  4. Solo se pueden listar los pedidos del restaurante al que pertenece el empleado. |  |
| Empleado | Asignarse a un pedido y cambiar estado a "en preparación" | Yo como empleado de un restaurante necesito asignarme a un pedido y cambiarle su estado para que el cliente pueda saber el avance de su orden. | 1. El servicio debe devolver la lista de pedidos de acuerdo con un filtro por estado. 2. El servicio debe estar paginado y se le debe especificar la cantidad de elementos por página. 3. Se deben listar todos los campos del pedido.  4. Solo se pueden listar los pedidos del restaurante al que pertenece el empleado. 5. Asignarse a un pedido significa que en el campo EmpleadoAsignado se pone el id de quien se asigna a ese pedido. 6. Un empleado puede asignarse a varios pedidos al tiempo ya que podría estar preparando el mismo plato para más de un pedido. |  |
| 14 | Empleado | Notificar que el pedido está listo | Yo como empleado de un restaurante necesito notificar al cliente de que su pedido está listo para que tenga la certeza de que en pocos minutos lo podra recoger. | 1. Cuando un pedido está listo, se le debe notificar al cliente que su pedido está listo a través de mensaje SMS al telefono indicando el pin de seguridad para reclamar su pedido. |
| Empleado | Entregar pedido (Marcarlo como entregado) | Yo como empleado de un restaurante necesito marcar como entregado un pedido  para poder cerrar el ciclo del mismo y concentrarme en otros pedidos | 1. Sólo los pedidos que están en estado "Listo" pueden pasar a estado "entregado" 2. Ningún pedido en estado "entregado" puede ser modificado a cualquier estado diferente de "Listo". 3. Par apoder cambiar al estado "entregado" el empleado debe digitar el pin de seguridad que le fue enviado al cliente para reclamar su pedido. |  |
| Cliente | Cancelar pedido | Yo como cliente de un restaurante necesito poder cancelar mi pedido para tener la posibilidad de retractarme por cualquier motivo | 1. Sólo se pueden cancelar pedidos que se encuentren en estado "Pendiente" 2, Si el estado del pedido que tratan de cancelar es diferente a "Pendiente", se le debe notificar al usuario: "Lo sentimos, tu pedido ya está en preparación y no puede cancelarse" |  |
